Compass
================================

At this point you should know enough about Sass and what is possible to do in it. There are many ways how to use it. You can use the approach of writing everything for yourself and only if you need it. There are probably some of you who always work this way. But many developers want to save time to start next project. They often take some framework, that has the common things written and they just write the new parts specific for their project. The community about Sass is not different. There is not just one framework that you can use, but in this tutorial I will talk about the oldest and probably the most used of them. Compass. 

If you have some time to spare and learn something more, than I recommend to go through the code of the Compass, that you can find in it's public repository on the GitHub: `github.com/chriseppstein/compass <https://github.com/chriseppstein/compass>`_. There are more than just Sass code, while Compass has own tools to create projects. Important for you is to target the framework and then compass folder, where you can find only styles written in Sassy CSS (.scss).

Installation
############

Installation of this framework is simple. Important is to have installed Sass. If you for some reason don't, than go to the chapter about Sass, where is written the guide for installation. Put following command into console:

.. code-block:: bash
	
	gem install compass

There is possibility that on the UNIX/Linux systems will you need to add `sudo` before the command, while it will want to write into protected folders own data. It will download and set up path to compass files and prepare it to using for you.


Working with projects
#####################

In every project in which you want to use the Compass, you need to have configuration file, that says to the compiler where to look for files, where to save the output and some other options important for work. For all that there is command line tool called simply `compass`. I'm not going through all it's options, only the primary. If you want to see all options use option for help. In case that you need something, that it's not written in following text, I recommend the `Compass Tutorials <http://compass-style.org/help/tutorials/>`_, where are covered even more advance topics.

.. code-block:: bash
	
	compass -h

Now if you have some time try to look at the list of all options that compass has. I'm going to explain the primary ones and what they do.

**create**

The most important is to create new Compass project. It's done with the option `create`. After the option follows the name of the project.

.. code-block:: bash

	compass create HelloWorld

The start of its output will be following

.. code-block:: bash

	directory HelloWorld/ 
	directory HelloWorld/sass/ 
	directory HelloWorld/stylesheets/ 
	create HelloWorld/config.rb 
	create HelloWorld/sass/screen.scss 
	create HelloWorld/sass/print.scss 
	create HelloWorld/sass/ie.scss 
	create HelloWorld/stylesheets/print.css 
	create HelloWorld/stylesheets/screen.css 
	create HelloWorld/stylesheets/ie.css 

It creates the folder HelloWorld with `config.rb`, in that is stored the settings that will be used by the compass compiler, and two folders one for yours Sass code - `sass` and one for generated css called `stylesheets`. It even creates three `.scss` files for your styles and compile them to their CSS versions. At the end of the output is how to include the styles to your HTML or some similar document, where you need the styles, but this you should know. 

The names of the files don't need to be equal to the version generated by compass. Only the `config.rb` file name needs to stay without change. It stores the settings for the compiler where to look for the sass files and where save the output. It even sets where are saved images that you use and your javascript if you have any. 

Content of the `config.rb`::

	# Require any additional compass plugins here.

	# Set this to the root of your project when deployed:
	http_path = "/"
	css_dir = "stylesheets"
	sass_dir = "sass"
	images_dir = "images"
	javascripts_dir = "javascripts"

	# You can select your preferred output style here (can be overridden via the command line):
	# output_style = :expanded or :nested or :compact or :compressed

	# To enable relative paths to assets via compass helper functions. Uncomment:
	# relative_assets = true

	# To disable debugging comments that display the original location of your selectors. Uncomment:
	# line_comments = false


	# If you prefer the indented syntax, you might want to regenerate this
	# project again passing --syntax sass, or you can uncomment this:
	# preferred_syntax = :sass
	# and then run:
	# sass-convert -R --from scss --to sass sass scss && rm -rf sass && mv scss sass

There are comments that explain a lot of things, if you are not sure what does some option mean. You are probably not going to change a lot of the code in here. Only at the time of deployment of the project is nice to uncomment the `line_comments` (just delete the hash sign `#`) and set the `output_style` to `:compressed`. This way will compass generate for you the smallest version of your style.

**init**

If you had started some project and later you figure out that you need to use Compass, than comes the `init` option handy. It create all important files for compass in the directory where is your project. Enter the folder with your project. For example, it's called `web_app` and run following command.

.. code-block:: bash

	compass init

After that you are done. It created `config.rb` and the folders for the sass styles and generated CSS. You can say that you can create it on your own, while it's just one configuration file and few folders. But `init` makes it for you.

**compile**

Probably the most important option. It looks at the configuration file and base on the settings it generates CSS from your Sass. 

.. code-block:: bash

	compass compile [/path/to/project]

If you are in the same directory as is the `config.rb` file, than the path won't be there. The path to project is important if you in other directory as the configuration file.

**watch**

This option will be used most of the time. It does the same thing as the `compile` with one feature at the top. It waits for changes of your sass code and if there are any, `watch` will compile your code automatically.

.. code-block:: bash

	compass watch [/path/to/project]

Again the path is important only in case that you are not in the same directory as is the `config.rb` file.

Compass core
##########################

The Compass library is created from two frameworks at the time of writing. The one is the core of the Compass about which would be this section. Another is the Blueprint framework. I'm not going to talk about the Blueprint while it will be deprecated from newer versions of Sass. If you need some toolkit to work with grid and layouts, than I recommend to look at the `Susy <http://susy.oddbird.net/>`_. It's build with the Sass and works nice with Compass.

The Compass core is spliced into six parts.

- CSS3 - how the name suggests it contains mixins to make life with CSS3 easier
- Typography 
- Utilities
- Layout 
- Reset - global reset based on the `Eric Meyer's reset 2.0 <http://meyerweb.com/eric/tools/css/reset/index.html>`_
- Helpers - functions that add new functions to existing in the SassScript

Each one will be dedicated own section where I go through the features that it has. If you need only to find something specific and you don't need comments for it than I recommend the Compass reference at `Compass Reference <http://compass-style.org/reference/compass/>`_.

Easiest way how to start using Compass is to use 

.. code-block:: scss

	@import "compass";

After that you can access everything included in the CSS3, typography and utilities category. 

Reset
*******

All browsers have default styles that are called if the site has not own stylesheet for required element. With one small problem. They have slightly different predefined styles for some elements, so for example the padding for `div` haven't have to be the same. And there are many different places when you need no padding and margins defined. For that most of the developers specify at the begin of the CSS the 'reset' rules.  Because this is often done, Compass has built-in support for it. Just at the begin of Sass code include the reset and it will append the global reset based on the `Eric Meyer's reset 2.0 <http://meyerweb.com/eric/tools/css/reset/index.html>`_. 

.. code-block:: scss

	@import "compass/reset";

If you need specific version only for some elements only include utilities from the reset. Most of the time you will use the global reset, if not than at `Reset Utilities <http://compass-style.org/reference/compass/reset/utilities/>`_ you can find the reference for mixins for more specified reset.

.. code-block:: scss
	
	@import "compass/reset/utilities";

CSS3
******

The CSS3 brings many new features to modern browser. From basic things like border radius through box-shadow to advance effects created with transitions and key-frames. Everything would be great if CSS3 would be completed and all features in it implemented in all browsers the same way. But this is just wish of all web-developers. Truth is that browsers came with their own prefixes for function of CSS3 which has not yet been accepted to the final version or they have their own ideas that they want to make their browser more advance for example.

Every web-developer today must have seen vendor prefixes like -webkit-, -ms-, -mz- and -o-. If you need to create button, that drops shadow, in perfect universe you will write 

.. code-block:: css

    .perfect-button {
        ...
        box-shadow: 2px 2px 5px 4px rgba(42,42,42,0.8);
        ...
    }

But in this world you must write something like

.. code-block:: css
    
	.just-button {
	    ...
	    -webkit-box-shadow: 2px 2px 5px 4px rgba(42,42,42,0.8);
	       -moz-box-shadow: 2px 2px 5px 4px rgba(42,42,42,0.8);
	            box-shadow: 2px 2px 5px 4px rgba(42,42,42,0.8);
	    ...
	}

This is one of the better cases when there not all browsers have their own prefixes. But we need to add two more lines just to secure that it will work in as many browsers as possible. Finally the same example written in Sass using Compass.

.. code-block:: scss

  @import "compass/css3"

  .scss-button {
      ...
      @include box-shadow(rgba(42,42,42,0.8) 2px 2px 5px 4px);
      ...
  }

The import is needed only once so I will not count it. We are again at one line for the box-shadow. The code with vendor prefixes will be generated by mixin defined in Compass. I'm not going to write specifically about mixins defined in the Compass, while they can change through time. For the most updated version visit their site with `Compass CSS3 reference <http://compass-style.org/reference/compass/css3/>`_.

Helpers
**********

The Sass comes with huge library of functions and the Compass helpers section extends it. The full reference of it is at `Compass Helpers <http://compass-style.org/reference/compass/helpers/>`_. I don't think that you would ever need all of them in one project. But few  of them can save a lot work so you will be using them more frequently. 

It can happen that through development of the web application are two groups. One is coding the back-end with all logic and interactions and the second is aimed on the front-end and working on the styles. It can happen that at the deployment changes are made to the paths for the images. If you are using just CSS, you must go through code and change the occurrence of the problems. In helpers there exists function 

.. code-block:: scss
	
	image-url(path, [only-path])

It looks into the `config.rb` file and takes the images_dir value. For example I have image called `smiley.png`, that is saved in the folder `images` in the project.

.. code-block:: scss

	.avatar {
		background: image-url('smiley.png');
		
		&:after {
			content: image-url('smiley.png', true);
		}
	}

.. code-block:: css

	.avatar {
		background: image-url('/images/smiley.png');
	}
	.avatar:after {
		content: "/images/smiley.png";
	}

How can you see there is slightly difference, if you set the second argument to `true`. Than it will omit the `url()` in the output. The similar functions exist for the fonts. Only difference is in the name `font-url`.

Next useful function is for dimensions of the images. If you need to know the dimensions of the image, compass comes with functionality for that. 

.. code-block:: scss

	image-height(image);

	image-width(image);

The image is relative path of the image. Another tool for images is the function 

.. code-block:: scss

	inline-images(image, [mime-type]);

I recommend to use it only for small images, like icons, where it can save the HTTP request, with little larger CSS file.

Utilities
***********

The Compass Utilities brings mixins for some common tasks. There are utility for control what will be in the print version displayed or if you need to fast way to style table that you can use `@import "compass/utilities/tables";` example can be find at `Table utility example <http://compass-style.org/examples/compass/tables/all/>`_.

At last I would like to show you how to work with sprites in the Compass. The reason for using sprites is to save HTTP request and speedup the load of the site. They are most of time used if you have many small icons. Without using sprites every one image must be loaded separately. With sprites it loads all images and that using CSS use only needed.

In our example we have all 3 icons for social networks with dimensions 32x32 pixels saved in the directory `social`. 

.. code-block:: bash

	images/icons/social/fb.png
	images/icons/social/gplus.png
	images/icons/social/tweet.png

I will show you the basic and easiest way how to create sprite. At the top of your Sass file put

.. code-block:: scss

	@import "icons/social/*.png";
	@import all-social-sprites;

It will generate

.. code-block:: css

	.social-fb,
	.social-gplus,
	.social-tweet { background: url('/images/icons/social-s34fe0232ab.png') no-repeat; }

	.social-fb { background-position: 0 0; }
	.social-gplus   { background-position: 0 -32px; }
	.social-tweet    { background-position: 0 -64px; }

The numbers in the name of the generated sprite will you get different. If you want to learn more about the generating sprites in the Compass, than read `Tutorial about sprites at Compass <http://compass-style.org/help/tutorials/spriting/>`_.
